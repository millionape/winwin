<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <link rel="icon" href="../public/stylesheets/icon/scooter.png">

    <title>ระบบจัดการวินมอเตอร์ไซค์</title>

    <!-- Bootstrap core CSS -->
    <link href="../public/stylesheets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="../public/stylesheets/vendor/jquery/jquery.js"></script>
    <script src="../public/stylesheets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js">
    </script>
    <script>
        // function searchGroup() {
        //     console.log('search...')
        //     const keyword = $('#groupSearch').val();
        //     if (keyword) {
        //         let tmp = $.ajax({
        //             type: "POST",
        //             url: '/searchGroup',
        //             data: JSON.stringify({
        //                 groupKeyword: keyword
        //             }),
        //             contentType: "application/json; charset=utf-8",
        //             dataType: "json",
        //             success: function (data) {
        //                 console.log(data);
        //                 return data;
        //             }
        //         });
        //     }
        // }
        $(document).ready(function () {
            // console.log("ready!");
            // var timer = null;
            // $("#groupSearch").keyup(function () {
            //     $('#dd1').dropdown('toggle')
            //     if (timer === null) {
            //         timer = setTimeout(searchGroup, 1000);
            //     } else {
            //         clearTimeout(timer)
            //         timer = setTimeout(searchGroup, 1000);
            //     }
            //     // console.log($('#groupSearch').val());
            // });
        });
    </script>

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top">
        <div class="container">
            <a class="navbar-brand" href="/home">ระบบจัดการวินมอเตอร์ไซค์</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item mr-3">
                        <a type="button" class="btn btn-outline-light text-light">ชื่อผู้ใช้ : <%=displayName%></a>
                    </li>

                    <li class="nav-item active">
                        <a class="nav-link" href="/home">Home
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/logout">logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Content -->
    <!-- mt stands for Margin-top -->
    <div class="container" style="width: 100% !important; height: 80%;">
        <div class="card mt-3">
            <div class="card-header">
                <h3>ค้นหาข้อมูล</h3>
            </div>
            <div class="card-body">
                <div class="row w-50 mx-auto mt-2">
                    <div class="col-sm-4">
                        <h4>ค้นหาวิน</h4>
                    </div>
                    <div class="col-sm-8">
                        <form action="/searchGroup" method="post">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" name="groupKeyword" placeholder="ชื่อวิน" id="groupSearch"
                                aria-describedby="basic-addon2">
                            <div class="input-group-prepend">
                                <button type="submit" class="btn btn-outline-secondary" type="button" id="button-addon1">ค้นหา</button>
                            </div>
                        </div>
                        </form>
                    </div>
                    <br>
                    <div class="col-sm-4">
                        <h4>ค้นหาบุคคล</h4>
                    </div>
                    <div class="col-sm-8">
                        <form action="/searchPerson" method="post">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" name="personKeyword" placeholder="ชื่อลูกวิน , หัวหน้าวิน" id="personKeyword"
                                aria-describedby="basic-addon2">
                            <div class="input-group-prepend">
                                <button type="submit" class="btn btn-outline-secondary" type="button" id="button-addon1">ค้นหา</button>
                            </div>
                        </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>
        <div class="card bg-light mt-3">
            <div class="card-header">
                <div class="row">
                    <h3 class="ml-3">วินมอเตอร์ไซค์รับจ้างทั้งหมด</h3>
                    <a href="/createGroup" type="button" class="btn btn-success ml-3"
                        style=" right: 0;">เพิ่มวินมอเตอร์ไซค์</a>
                </div>

            </div>

            <div class="row mt-3 mx-auto" style="width: 95% !important; height: 80%;">
                <% if (groups.length) {%>
                <% groups.forEach((group) => {%>
                <div class="col-md-4 mb-3">
                    <div class="card bg-dark text-light" style="height: 100% !important;">
                        <div class="card-body">
                            <h4 class="card-title">ชื่อวิน :<%= group.groupName%></h4>
                            <p class="card-text">หัวหน้าวิน: <%= group.inchargeName%> <%= group.inchargeLastName%></p>
                            <a href="/showgroup?id=<%= group.groupId%>" class="btn btn-primary">ดูเพิ่มเติม</a>
                        </div>
                    </div>
                </div>
                <%
                  }) %>
                <%
              } %>


            </div>
        </div>


    </div>

</body>

</html>